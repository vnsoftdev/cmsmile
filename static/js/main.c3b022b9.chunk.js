(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){e.exports=n.p+"static/media/1.4be3f8be.png"},108:function(e,t,n){e.exports=n.p+"static/media/2.8c0b4eb4.png"},109:function(e,t,n){e.exports=n.p+"static/media/3.0debeb45.png"},110:function(e,t,n){e.exports=n.p+"static/media/4.70d9f588.png"},111:function(e,t,n){e.exports=n.p+"static/media/5.6a5fbc95.png"},129:function(e,t,n){e.exports=n(215)},138:function(e,t,n){},143:function(e,t){},151:function(e,t,n){},152:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},206:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(0),r=n.n(a),o=n(2),c=n.n(o),i=n(56),l=(n(85),n(23)),s=(n(138),n(127)),u=n(31),p=n(88),d=n(6),m=n(48),h={SET_USER_DATA:"SET_USER_DATA",SET_STATUS_LOGGED:"SET_STATUS_LOGGED",TOGGLE_SPINNER:"TOGGLE_SPINNER"},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:"",user:{},logged:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.SET_USER_DATA:return Object(m.a)({},e,{user:t.data});case h.SET_STATUS_LOGGED:return Object(m.a)({},e,{logged:t.logged});default:return e}},v=n(35),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{toggle:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.TOGGLE_SPINNER:return Object(m.a)({},e,{toggle:t.toggleSpin});default:return e}},b=function(e){return Object(u.c)({userData:g,spinner:f,i18n:d.i18nReducer,router:Object(v.b)(e)})},E=Object(s.a)(),S=[i.a];var O={en:{application:{title:"Awesome app with i18n!",hello:"Hello, %{name}!",bad:"Bad",poor:"Poor",average:"Average",good:"Good",excellent:"Excellent",describetion:"Please take a moment to review your experience with us",logout:"Log out",send:"Send",vietnamese:"Vietnamese",english:"English",comment:"Comment",success:"Success",fail:"Fail",confirmSend:"Are you sure?",product:"Product"},date:{long:"MMMM Do, YYYY"},export:"Export %{count} items",export_0:"Nothing to export",export_1:"Export %{count} item",two_lines:"Line 1<br />Line 2",literal_two_lines:"Line 1Line 2"},vn:{application:{title:"XIN CHAO",hello:"Xin ch\xe0o, %{name}!",bad:"R\u1ea5t T\u1ec7",poor:"T\u1ec7",average:"Trung b\xecnh",good:"T\u1ed1t",excellent:"Xu\u1ea5t s\u1eafc",describetion:"Vui l\xf2ng \u0111\u1ec3 l\u1ea1i nh\u1eadn x\xe9t v\u1ec1 tr\u1ea3i nghi\u1ec7m c\u1ee7a b\u1ea1n v\u1edbi ch\xfang t\xf4i",logout:"\u0110\u0103ng xu\u1ea5t",send:"G\u1eedi",vietnamese:"Ti\u1ebfng vi\u1ec7t",english:"Ti\u1ebfng Anh",comment:"Nh\u1eadn x\xe9t",success:"Th\xe0nh c\xf4ng",fail:"Th\u1ea5t b\u1ea1i",confirmSend:"B\u1ea1n x\xe1c nh\u1eadn g\u1eedi?",product:"S\u1ea3n ph\u1ea9m"},date:{long:"D MMMM YYYY"},export:"Exporteer %{count} dingen",export_0:"Niks te exporteren",export_1:"Exporteer %{count} ding",two_lines:"Regel 1<br />Regel 2",literal_two_lines:"Regel 1Regel 2"}};var w=n(219),T=n(220),j=n(5),y=n.n(j),x=n(14),_=n(10),k=n(15),R=n(18),A=n(16),N=n(20),C=n(9),D=n(107),P=n.n(D),I=n(108),L=n.n(I),M=n(109),G=n.n(M),U=n(110),W=n.n(U),F=n(111),V=n.n(F),Y=(n(151),n(152),n(58)),q=n.n(Y),B=function(e){function t(){var e,n;Object(_.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(R.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){console.log("WWWWWW",window.history)},n}return Object(N.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"custom-header"},r.a.createElement("header",null,r.a.createElement("img",{src:q.a,alt:"logo",className:"header-logo"})),r.a.createElement("h1",{className:"company-name"},"C\u1ecf may smile"),r.a.createElement("p",null,r.a.createElement(d.Translate,{value:"application.describetion"})))}}]),t}(a.Component),J=(n(153),"https://comaycard.com/graphql"),X="/cmcard",H="/cmcbs",K="/cmlink",$="API_CMACARD",z="API_CMACBS",Q="API_CMLINK",Z=function(e){return J+e},ee=Z(""),te=Z(X),ne=Z(H),ae=Z(K);console.log("endpointCmcard",te),console.log("endpointCmcard",ne);var re=function e(){Object(_.a)(this,e)};re.fetchToServer=function(){var e=Object(x.a)(y.a.mark(function e(t){var n,a,r,o=arguments;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:"",console.log("***** fetchToServer",n),a=localStorage.getItem("token"),r=ee,n===$?r=te:n===z?r=ne:n===Q?r=ae:a="",!0,console.log("isconnnnnn",!0),e.next=9;break;case 9:return e.abrupt("return",fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",token:a},body:JSON.stringify({query:t})}).then(function(e){return e.json()}).then(function(e){return console.log("postRegistTokenToServer : "+e),e}).catch(function(e){return console.error("Erorr grap service",t,e),{data:null,errors:e}}));case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),re.request=function(){var e=Object(x.a)(y.a.mark(function e(t){var n,a,r=arguments;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"",e.prev=1,e.next=4,re.fetchToServer(t,n);case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("error Services: ",e.t0),e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),re.mutate=function(){var e=Object(x.a)(y.a.mark(function e(t){var n,a,r=arguments;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"",e.prev=1,e.next=4,re.fetchToServer(t,n);case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}();var oe=function e(){Object(_.a)(this,e)};oe.login=function(){var e=Object(x.a)(y.a.mark(function e(t,n){var a,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a='\n      {\n        login(login: "'.concat(t,'", password: "').concat(n,'") {\n          id\n          first_name\n          last_name\n          email\n          login\n          token\n        }\n      }'),e.next=4,re.request(a);case 4:return r=e.sent,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),console.log("Err graph",e.t0),e.t0;case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n){return e.apply(this,arguments)}}(),oe.getProducts=function(){var e=Object(x.a)(y.a.mark(function e(t){var n,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("APIII PRODUCT partnerId",t),e.prev=1,n="\n        {\n          show_products(by_partner_id: ".concat(t,")\n          {\n            name\n            code\n            pcategory_name\n            price\n            points\n            by_partner\n          }\n        }\n      "),e.next=5,re.request(n,$);case 5:return a=e.sent,e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(1),console.log("Err graph",e.t0),e.t0;case 13:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),oe.sendRateData=function(){var e=Object(x.a)(y.a.mark(function e(t,n,a,r){var o,c;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o="\n          mutation {\n            rating(product_id: ".concat(t,", value: ").concat(n,", created_by: ").concat(a,', comment: "').concat(r,'") {\n              id\n            }\n          }\n        \n      '),console.log("APIII sendRateData",o),e.next=5,re.mutate(o,Q);case 5:return c=e.sent,console.log("APIII sendRateData REEEEEESSSS",c),e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(0),console.log("Err graph",e.t0),e.t0;case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,n,a,r){return e.apply(this,arguments)}}();var ce=function(e){return{type:h.SET_STATUS_LOGGED,logged:e}},ie=function(e){return{type:h.SET_USER_DATA,data:e}},le=n(222),se=n(221),ue=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(R.a)(this,Object(A.a)(t).call(this,e))).componentDidMount=function(){if(localStorage.getItem("token")){n.getProductsFromServer();var e=localStorage.getItem("login");e=JSON.parse(e),n.props.setUserData(e),n.props.setStatusLogged(!0)}else n.props.logged||n.props.directToOtherPage("/login")},n.getProductsFromServer=Object(x.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t={show_products:[{id:5,name:"1"},{id:6,name:"2"},{id:7,name:"3"}]})&&t.show_products&&(n.setState({products:t.show_products,activeProduct:t.show_products[0]}),console.log("getProductsFromServer",t));case 2:case"end":return e.stop()}},e)})),n.handleClickTab=function(e){n.setState({activeProduct:e,activeRate:{},comments:""})},n.handleClickRate=function(e){n.setState({activeRate:e})},n.resetRate=function(){n.setState({activeProduct:n.state.products[0],activeRate:{},comments:""})},n.handleClickSend=Object(x.a)(y.a.mark(function e(){var t,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.activeRate||""===n.state.comments){e.next=11;break}return n.props.callToggleSpinner(!0),e.next=4,oe.sendRateData(n.state.activeProduct.id,n.state.activeRate.id,n.props.user.id,n.state.comments);case 4:t=e.sent,a=t.data,t.errors,n.props.callToggleSpinner(!1),a?n.setState({showAlert:!0,titleAlert:"Ok",typeAlert:"success"}):n.setState({showAlert:!0,titleAlert:"Fail",typeAlert:"error"}),setTimeout(function(){n.setState({showAlert:!1})},2500),n.resetRate();case 11:case"end":return e.stop()}},e)})),n.showModal=function(e){n.setState({visibleModal:e})},n.state={products:[],rates:[{id:1,name:"bad"},{id:2,name:"poor"},{id:3,name:"average"},{id:4,name:"good"},{id:5,name:"excellent"}],activeRate:null,activeProduct:null,initData:!0,comments:"",titleAlert:"",showAlert:!1,typeAlert:"",visibleModal:!1},n}return Object(N.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=this.state.products.map(function(t,n){return r.a.createElement("div",{className:"tab-item "+(t.id==e.state.activeProduct.id?"active":""),key:"tab"+n,onClick:function(){return e.handleClickTab(t)}},r.a.createElement("p",null,r.a.createElement(d.Translate,{value:"application.product"})," ",t.name))}),n=this.state.rates.map(function(t,n){var a;1===t.id?a=P.a:2===t.id?a=L.a:3===t.id?a=G.a:4===t.id?a=W.a:5===t.id&&(a=V.a);var o="application."+t.name;return r.a.createElement("div",{className:"rate-item "+(e.state.activeRate&&t.id===e.state.activeRate.id?"active":""),key:"tab"+n,onClick:function(){return e.handleClickRate(t)}},r.a.createElement("img",{src:a,alt:t.name,className:"rate-icon"}),r.a.createElement("p",null,r.a.createElement(d.Translate,{value:o})))});return r.a.createElement("div",{className:"page-home"},r.a.createElement(B,{title:"Vui l\xf2ng ch\u1ecdn t\xednh n\u0103ng"}),r.a.createElement("div",{className:"tab-products"},t),r.a.createElement("div",{className:"rate-product"},n),r.a.createElement("div",{className:"comments"},r.a.createElement("span",{style:{fontWeight:"bold",maxWidth:"100px",minWidth:"100px",width:"100px"}},r.a.createElement(d.Translate,{value:"application.comment"}),":")," ",r.a.createElement("input",{className:"comment-input",value:this.state.comments,onChange:function(t){e.setState({comments:t.target.value})}})),this.state.showAlert&&r.a.createElement(le.a,{message:this.state.titleAlert,type:this.state.typeAlert}),r.a.createElement("button",{className:"submit "+(this.state.activeRate&&""!==this.state.comments?"":"disabled"),onClick:function(t){e.state.activeRate&&""!==e.state.comments&&e.showModal(!0)}},r.a.createElement(d.Translate,{value:"application.send"})),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{onClick:function(t){e.props.changeLang("en")}},r.a.createElement(d.Translate,{value:"application.english"})),r.a.createElement("button",{onClick:function(t){e.props.changeLang("vn")}},r.a.createElement(d.Translate,{value:"application.vietnamese"})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(t){e.props.setStatusLogged(!1),e.props.setUserData({}),localStorage.removeItem("token"),localStorage.removeItem("login"),setTimeout(function(){e.props.replace("/login")},400)}},r.a.createElement(d.Translate,{value:"application.logout"})))),r.a.createElement(se.a,{visible:this.state.visibleModal,onOk:function(){e.setState({visibleModal:!1}),e.handleClickSend()},onCancel:function(){return e.showModal(!1)},okText:"OK",cancelText:"Cancle"},r.a.createElement("p",null,r.a.createElement(d.Translate,{value:"application.confirmSend"}))))}}]),t}(a.Component),pe=Object(l.c)(function(e){return{logged:e.userData.logged,user:e.userData.user}},function(e){return{directToOtherPage:function(t){e(Object(C.d)(t))},callToggleSpinner:function(t){e(function(e){return{type:h.TOGGLE_SPINNER,toggleSpin:e}}(t))},changeLang:function(t){e(Object(d.setLocale)(t))},setUserData:function(t){e(ie(t))},setStatusLogged:function(t){e(ce(t))},replace:function(t){e(Object(C.e)(t))}}})(ue),de=n(42),me=(n(200),n(201),function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(R.a)(this,Object(A.a)(t).call(this,e))).handleOnChangeValue=function(e){var t=e.target.value;n.setState({value:t},function(){0===t.length&&n.validateField(n.props.type,t)})},n.validateField=function(e,t){var a=n.state.errorReason,r=n.state.valid;switch(e){case"email":0===t.length?(a="",r=!0):r=/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i.test(t),a=r?"":" is invalid";break;case"password":a=(r=t.length>=6)?"":" is too short"}n.setState({errorReason:a,valid:r})},n.state={value:n.props.value||"",emailValid:!1,passwordValid:!1,errorReason:"",valid:!0},console.log("TTTT",n.props),n}return Object(N.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-text-input"},r.a.createElement("input",{type:this.props.type,placeholder:this.props.holder,onChange:this.handleOnChangeValue,onBlur:function(){e.validateField(e.props.type,e.state.value)},ref:function(t){return e._input=t},value:this.state.value}),this.state.valid?r.a.createElement(r.a.Fragment,null):r.a.createElement("p",{className:"invalid-input"},this.state.errorReason," "))}},{key:"value",get:function(){return this.state.value}},{key:"valid",get:function(){return this.state.valid}}]),t}(a.Component)),he=!0,ge=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(R.a)(this,Object(A.a)(t).call(this,e))).componentWillMount=function(){n.props.logged&&n.props.replace("/")},n.login=Object(x.a)(y.a.mark(function e(){var t,a,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.email.value||!n.password.value){e.next=8;break}return e.next=3,oe.login(n.email.value,n.password.value);case 3:t=e.sent,a=t.data,t.errors,console.log("result",a),a&&(localStorage.setItem("token",a.login.token),n.props.setUserData(a.login),n.props.setStatusLogged(!0),n.props.replace("/"),r=JSON.stringify(a.login),localStorage.setItem("login",r));case 8:case"end":return e.stop()}},e)})),n.handleSubmit=function(e){e.preventDefault(),n.email.valid&&n.password.valid&&n.login()},n.handleInputChange=function(e){var t=e.target,a=t.value,r=t.name;n.setState(Object(de.a)({},r,a))},n.componentDidMount=function(){console.log("Ppppppp",n.props)},n.state={email:he?"thu.huynh@cma.com.vn":void 0,password:he?"cmacmacma":void 0,redirectToReferrer:!1},console.log("PROOOO",e),n}return Object(N.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"page-login"},r.a.createElement("img",{src:q.a,alt:"logo",className:"logo"}),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-login"},r.a.createElement("div",{className:"form-item"},r.a.createElement(me,{ref:function(t){return e.email=t},type:"email",placeholder:"email",value:this.state.email})),r.a.createElement("div",{className:"form-item"},r.a.createElement(me,{ref:function(t){return e.password=t},type:"password",placeholder:"password",value:this.state.password})),r.a.createElement("button",{type:"submit"},"\u0110\u0103ng nh\u1eadp")))}}]),t}(a.Component),ve=Object(l.c)(function(e){return{logged:e.userData.logged,user:e.userData.user}},function(e){return{setUserData:function(t){e(ie(t))},setStatusLogged:function(t){e(ce(t))},push:function(t){e(Object(C.d)(t))},replace:function(t){e(Object(C.e)(t))}}})(ge),fe=n(124),be=n.n(fe),Ee=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(R.a)(this,Object(A.a)(t).call(this,e))).handleScan=function(e){e&&n.setState({result:e})},n.handleError=function(e){console.error(e)},n.state={result:"No result"},n}return Object(N.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B,{title:"Chuy\u1ec3n \u0111i\u1ec3m"}),r.a.createElement(be.a,{delay:300,onError:this.handleError,onScan:this.handleScan,style:{width:"100%"}}),r.a.createElement("p",null,this.state.result))}}]),t}(a.Component),Se=n(218),Oe=(n(206),function(e){function t(){return Object(_.a)(this,t),Object(R.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"spinner "+(this.props.toggleSpin?"visible":"hidden")},r.a.createElement("div",{className:"spinner-body"},r.a.createElement(Se.a,null)))}}]),t}(a.PureComponent)),we=Object(l.c)(function(e){return{toggleSpin:e.spinner.toggle}},null)(Oe);i.a;var Te=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,n=Object(u.e)(b(E),e,t(u.a.apply(void 0,S.concat([Object(p.a)(E)]))));return Object(d.syncTranslationWithStore)(n),n.dispatch(Object(d.loadTranslations)(O)),n.dispatch(Object(d.setLocale)("en")),n}();c.a.render(r.a.createElement(l.a,{store:Te},r.a.createElement(we,null),r.a.createElement(v.a,{history:E},r.a.createElement(w.a,null,r.a.createElement(T.a,{exact:!0,path:"/",render:function(){return r.a.createElement(pe,null)}}),r.a.createElement(T.a,{exact:!0,path:"/qr-reader",render:function(){return r.a.createElement(Ee,null)}}),r.a.createElement(T.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(ve,null)}}),r.a.createElement(T.a,{render:function(){return r.a.createElement("div",null,"Miss")}})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},58:function(e,t,n){e.exports=n.p+"static/media/comay_logo.53d39311.png"}},[[129,1,2]]]);
//# sourceMappingURL=main.c3b022b9.chunk.js.map